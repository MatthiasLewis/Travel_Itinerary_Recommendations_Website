<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>iTravel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Free HTML5 Website Template by FreeHTML5.co" />
  <meta name="keywords" content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
  <meta name="author" content="FreeHTML5.co" />

  <!-- Facebook and Twitter integration -->
  <meta property="og:title" content=""/>
  <meta property="og:image" content=""/>
  <meta property="og:url" content=""/>
  <meta property="og:site_name" content=""/>
  <meta property="og:description" content=""/>
  <meta name="twitter:title" content="" />
  <meta name="twitter:image" content="" />
  <meta name="twitter:url" content="" />
  <meta name="twitter:card" content="" />

  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
  
  <!-- Animate.css -->
  <link rel="stylesheet" href="css/animate.css">
  <!-- Icomoon Icon Fonts-->
  <link rel="stylesheet" href="css/icomoon.css">
  <!-- Themify Icons-->
  <link rel="stylesheet" href="css/themify-icons.css">
  <!-- Bootstrap  -->
  <link rel="stylesheet" href="css/bootstrap.css">

  <!-- Magnific Popup -->
  <link rel="stylesheet" href="css/magnific-popup.css">

  <!-- Magnific Popup -->
  <!-- <link rel="stylesheet" href="css/bootstrap-datepicker.min.css"> -->

  <!-- Owl Carousel  -->
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">

  <!-- Theme style  -->
  <link rel="stylesheet" href="css/style.css">

  <!-- jQuery -->
  <script src="js/jquery.min.js"></script>
  <!-- jQuery Easing -->
  <script src="js/jquery.easing.1.3.js"></script>
  <!-- Bootstrap -->
  <script src="js/bootstrap.min.js"></script>
  <!-- Waypoints -->
  <script src="js/jquery.waypoints.min.js"></script>
  <!-- Carousel -->
  <script src="js/owl.carousel.min.js"></script>
  <!-- countTo -->
  <script src="js/jquery.countTo.js"></script>
  <!-- Stellar Parallax -->
  <script src="js/jquery.stellar.min.js"></script>
  <!-- Magnific Popup -->
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/magnific-popup-options.js"></script>
  <!-- Datepicker -->
  <!-- <script src="js/bootstrap-datepicker.min.js"></script> -->
  <!-- jQuery UI -->
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  <!-- Main -->
  <script src="js/main.js"></script>
  <script>

    document.addEventListener("DOMContentLoaded", function() {
      const today = new Date().toISOString().split("T")[0]; // 獲取今天的日期
  
      const startDateInput = document.getElementById("date-start");
      startDateInput.setAttribute("min", today);
  
      const endDateInput = document.getElementById("date-end");
      endDateInput.setAttribute("min", today);
  
      // 監聽日期輸入變化，如果手動輸入日期早於今天，則重置為今天
      startDateInput.addEventListener("change", function() {
          if (startDateInput.value < today) {
              startDateInput.value = today;
          }
      });
  
      endDateInput.addEventListener("change", function() {
          if (endDateInput.value < today) {
              endDateInput.value = today;
          }
      });
  });
  </script>
  
</head>

<body>
  <body>
    <div class="gtco-loader"></div>
    <div id="page">
      <nav class="gtco-nav" role="navigation">
        <div class="gtco-container">
          <div class="row">
            <div class="col-sm-4 col-xs-12">
            <div id="gtco-logo">
                <a href="index.html">
                  <img src="images/logo_w.png" alt="logo" style="width: 20%; height: auto;">
                </a>
              </div>
            </div>
            <div class="col-xs-8 text-right menu-1">
              <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="book1.html">Plan Now</a></li>
                <li><a href="destination.html">Destination</a></li>
                <li><a href="carbon.html">Carbon</a></li>
                <li><a href="faq.html">FAQ</a></li>
              </ul>
            </div>
          </div>
        </div>
      </nav>




    <header id="gtco-header" class="gtco-cover gtco-cover-md" role="banner" style="background-image: url(taiwan1.jpg)">
      <div class="overlay"></div>
      <div class="gtco-container">
        <div class="row">
          <div class="col-md-12 col-md-offset-0 text-left">
            <div class="row row-mt-15em">
              <div class="col-md-7 mt-text animate-box" data-animate-effect="fadeInUp">
                <h1>Planning a Trip to Anywhere in Taiwan?</h1>
              </div>
              <div class="col-md-4 col-md-push-1 animate-box" data-animate-effect="fadeInRight">
                <div class="form-wrap">
                  <div class="tab">
                    <div class="tab-content">
                      <div class="tab-content-inner active" data-content="signup">
                        <h3>行程設定</h3>
                        <!-- <form id="indexForm" action="http://35.187.155.171/itravel/book1.html" method="POST"> -->
                        <!-- <form id="indexForm" action="http://127.0.0.1:5500/new_itravel_0803/book1.html" method="POST"> -->
                        <form id="indexForm" onsubmit="submitForm1(event)">
                          <div class="row form-group">
                            <div class="col-md-12">
                              <label for="destination">旅遊目的地</label>
                              <select name="county" id="destination" class="form-control" required>
                                <!-- <option value="">請選擇一個</option> -->
                                <option value="基隆市">基隆市</option>
				                        <option value="新北市">新北市</option>
                                <option value="台北市">台北市</option>
                                <option value="宜蘭縣">宜蘭縣</option>
                                <option value="桃園市">桃園市</option>
                                <option value="新竹市">新竹市</option>
                                <option value="新竹縣">新竹縣</option>
                                <option value="苗栗縣">苗栗縣</option>
                                <option value="台中市">台中市</option>
                                <option value="彰化縣">彰化縣</option>
                                <option value="南投縣">南投縣</option>
                                <option value="雲林縣">雲林縣</option>
                                <option value="嘉義市">嘉義市</option>
                                <option value="嘉義縣">嘉義縣</option>
                                <option value="台南市">台南市</option>
                                <option value="高雄市">高雄市</option>
                                <option value="澎湖縣">澎湖縣</option>
                                <option value="屏東縣">屏東縣</option>
                                <option value="花蓮縣">花蓮縣</option>
                                <option value="台東縣">台東縣</option>
                              </select>
                            </div>
                          </div>
                          
                          <div class="row form-group">
                            <div class="col-md-12">
                              <label for="date-start">出發日期</label>
                              <input type="date" id="date-start" name="departure_date" class="form-control" required>
                            </div>
                          </div>


                          <div class="row form-group">
                            <div class="col-md-12">
                              <label for="date-end">返回日期</label>
                              <input type="date" id="date-end" name="return_date" class="form-control" required>
                            </div>
                          </div>
                          
                          <div class="row form-group">
                            <div class="col-md-12">
                              <label for="howmanydays">旅遊天數</label>
                              <input type="number" id="howmanydays" class="form-control" readonly>
                            </div>
                          </div>
                          </div>
<!-- 
                          <div class="row form-group">  
                            <div class="col-md-12">
                              <label>是否自行開車：</label><br>
                              <label><input type="radio" name="driving_option" value=1 required> 是</label>
                              <label><input type="radio" name="driving_option" value=0 required> 否</label><br>
                            </div>
                          </div>                  
                          <div class="row form-group"> -->
                          

                          <div class="row form-group">
                            <div class="col-md-12">
                              <input type="submit" class="btn btn-primary btn-block" value="下一步">
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <footer id="gtco-footer" role="contentinfo">
      <div class="gtco-container">
        <div class="row row-p   b-md">
          <div class="col-md-4">
            <div class="gtco-widget">
              <h3>About Us</h3>
              <p>We are a dedicated team of passionate creators committed to providing you with the best travel experience through our booking website with a harmonious blend of expertise.  Welcome aboard, and let us take you on unforgettable journeys!</p>
            </div>
          </div>
          <div class="col-md-2 col-md-push-1">
            <div class="gtco-widget">
              <h3>Destination</h3>
              <ul class="gtco-footer-links">
                <li><a href="destination.html#firstrow">Taipei</a></li>
                <li><a href="destination.html#firstrow">Kaohsiung</a></li>
                <li><a href="destination.html#firstrow">Taoyuan</a></li>
                <li><a href="destination.html#secondrow">keelung</a></li>
                <li><a href="destination.html#secondrow">Hualien</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md-2 col-md-push-1">
            <div class="gtco-widget">
              <h3>Support</h3>
              <ul class="gtco-footer-links">
                <li><a href="faq.html">FAQ</a></li>
                <li><a href="contact.html">Contact Us</a></li>
                <li><a href="carbon.html">Carbon</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md-3 col-md-push-1">
            <div class="gtco-widget">
              <h3>Get In Touch</h3>
              <ul class="gtco-quick-contact">
                <li class="phone"><a href="tel://02 2700 5858">+02 2700 5858</a></li>
                <li class="email"><a href="mailto:info@yoursite.com">https://www.sce.pccu.edu.tw/</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="row copyright">
          <div class="col-md-12">
            <p class="pull-left">
              <small class="block">&copy; 2023 Designed by Team iTravel.</small> 
            </p>
            <p class="pull-right">
              <ul class="gtco-social-icons pull-right">
                <li><i class="icon-twitter"></i></li>
                <li><i class="icon-facebook"></i></li>
                <li><i class="icon-linkedin"></i></li>
                <li><i class="icon-dribbble"></i></li>
              </ul>
            </p>
          </div>
        </div>
      </div>
    </footer>

    <div class="gototop js-top">
      <a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
    </div>

    <!-- <script>
      document.addEventListener("DOMContentLoaded", function() {
        $('#date-start').datepicker();
        $('#date-end').datepicker();
      });
    </script> -->
    <!-- jQuery -->
    <script src="js/jquery.min.js"></script>
    <!-- jQuery Easing -->
    <script src="js/jquery.easing.1.3.js"></script>
    <!-- Bootstrap -->
    <script src="js/bootstrap.min.js"></script>
    <!-- Waypoints -->
    <script src="js/jquery.waypoints.min.js"></script>
    <!-- Carousel -->
    <script src="js/owl.carousel.min.js"></script>
    <!-- countTo -->
    <script src="js/jquery.countTo.js"></script>
    <!-- Stellar Parallax -->
    <script src="js/jquery.stellar.min.js"></script>
    <!-- Magnific Popup -->
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/magnific-popup-options.js"></script>
    <!-- Datepicker -->
    <!-- <script src="js/bootstrap-datepicker.min.js"></script> -->
    <!-- Main -->
    <script src="js/main.js"></script>
    <script>
      function calculateDays() {
      const startDateInput = document.getElementById('date-start');
      const endDateInput = document.getElementById('date-end');
      const daysInput = document.getElementById('howmanydays');

      const startDate = new Date(startDateInput.value);
      const endDate = new Date(endDateInput.value);

      // 計算日期間的天數
      const timeDiff = Math.abs(endDate.getTime() - startDate.getTime());
      const days = Math.ceil(timeDiff / (1000 * 3600 * 24)+1 );

      // 將天數顯示在 "你想去多少天?" 的 input 欄位中
      //daysInput.value = days+1;
          // 將天數顯示在 "你想去多少天?" 的 input 欄位中
      if (endDate < startDate) {
          endDateInput.setCustomValidity('返程日期必須在旅行日期之後');
        } else if (days > 7) {
          endDateInput.setCustomValidity('旅行天數不可超過七天');
        } else {
          endDateInput.setCustomValidity('');
          daysInput.value = days;
        }                  
    }

    // 使用者選擇日期時觸發計算天數的功能
    document.getElementById('date-start').onchange = calculateDays;
    document.getElementById('date-end').onchange = calculateDays;

      function submitForm1(event) {
        event.preventDefault(); // 阻止表單的預設提交行為
        const county = document.getElementById('destination').value;
        const dates = document.getElementById('howmanydays').value;
        const departureDate = document.getElementById('date-start').value;
        const returnDate = document.getElementById('date-end').value;
        // const selectedDrivingOption = document.querySelector('input[type="radio"][name="driving_option"]:checked').value;
        // 發送 API GET 請求
        fetch(`http://127.0.0.1:5000/Travel?county=${county}`, {
                                        method: 'GET'
                                      });
        // 將 county 儲存到 Session 中
        sessionStorage.setItem('county', county);
        sessionStorage.setItem('dates', dates);
        sessionStorage.setItem('departure_date', departureDate);
        sessionStorage.setItem('return_date', returnDate);
        // sessionStorage.setItem('transportation', selectedDrivingOption);
        console.log('dates', dates);
        // 在這裡跳轉到 form2.html，例如：
        window.location.assign('book2.html');
      }
    </script>
  </body>
</html>
